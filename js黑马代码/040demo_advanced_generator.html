<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>
  /*
  setTimeout(()=>{
    console.log(111);
    setTimeout(()=>{
      console.log(222);
      setTimeout(()=>{
        console.log(333);
      },3000);
    },2000);
  },1000);
  //生成器函数完成异步任务
  function one(){
    setTimeout(()=>{
      console.log(111);
      iterator.next();
    },1000);
  }
  function two(){
    setTimeout(()=>{
      console.log(222);
      iterator.next();
    },2000);
  }
  function three(){
    setTimeout(()=>{
      console.log(333);
      iterator.next();
    },3000);
  }
  function * gen(){
    yield one();
    yield two();
    yield three();
  }
  //调用生成器函数
  // let iterator = gen();
  // iterator.next();

   */
</script>

<script>
  //模拟获取： 先获取用户数据、再获取订单数据、再获取商品数据
  function getUsers(){
    setTimeout(()=>{
      let data = '用户数据';
      //调用next方法，并且将数据传入
      iterator.next(data);
    },1000);
  }
  function getOrders(){
    setTimeout(()=>{
      let data = '订单数据';
      iterator.next(data);
    },1000);
  }
  function getGoods(){
    setTimeout(()=>{
      let data = '商品数据';
      iterator.next(data);
    },1000);
  }
  //不适用单独调用方法，因为数据之间有关联
/*
  getUsers();
  getOrders();
  getGoods();
 */
  function * gen(){
    let users = yield getUsers();
    console.log(users);
    let orders = yield getOrders();
    console.log(orders);
    let goods = yield getGoods();
    console.log(goods);
  }
  //调用生成器函数
  let iterator = gen();
  iterator.next();
</script>



</body>
</html>